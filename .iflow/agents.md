# sjgtv é¡¹ç›® - AI Agent ä¸Šä¸‹æ–‡æ–‡æ¡£

> æœ¬æ–‡ä»¶ç”± iFlow CLI è¯»å†™ï¼Œç”¨äº AI Agent ç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡å’Œå¼€å‘è§„èŒƒã€‚

## é¡¹ç›®æ¦‚è¿°

**sjgtv** æ˜¯ä¸€ä¸ªåŸºäº **Flutter** å¼€å‘çš„æ¨¡å—åŒ–æ™ºèƒ½ç”µè§†/æœºé¡¶ç›’è§†é¢‘æ’­æ”¾åº”ç”¨ï¼Œé‡‡ç”¨ `base` å…¬å…±åº“ + `app` åº”ç”¨çš„æ¶æ„è®¾è®¡ã€‚æœ¬é¡¹ç›®ä¸“ä¸ºç”µè§†é¥æ§å™¨æ“ä½œä¼˜åŒ–ï¼Œæ”¯æŒå¤šæ ¼å¼è§†é¢‘æ’­æ”¾å’Œç½‘ç»œæµåª’ä½“ã€‚

### é¡¹ç›®ç±»å‹
- ä»£ç é¡¹ç›®ï¼ˆFlutter/Dart è·¨å¹³å°åº”ç”¨ï¼‰
- æ¨¡å—åŒ–æ¶æ„ï¼š`base/`ï¼ˆå…¬å…±åº“ï¼‰+ `app/`ï¼ˆåº”ç”¨ä¸»ç¨‹åºï¼‰

### é¡¹ç›®ç”±æ¥
æœ¬é¡¹ç›®ç”± [DTV](https://github.com/laopaoer-wallet/DTV) ä½œè€…æè®®å¹¶æˆæ„é‡å†™ï¼Œåœ¨å…¶å»ºè®®ä¸‹ç‹¬ç«‹æ¼”è¿›å’Œç»´æŠ¤ã€‚

### ä¸»è¦æŠ€æœ¯æ ˆ
- **æ¡†æ¶**ï¼šFlutter 3.x / Dart â‰¥3.10
- **çŠ¶æ€ç®¡ç†**ï¼š`flutter_riverpod`ã€`riverpod_annotation`ã€`flutter_hooks`
- **æ•°æ®å­˜å‚¨**ï¼š`isar_community`ï¼ˆæœ¬åœ°æ•°æ®åº“ï¼‰ã€`hive` / `hive_flutter`ï¼ˆç¼“å­˜ï¼‰
- **ç½‘ç»œè¯·æ±‚**ï¼š`dio`ã€`retrofit`
- **è§†é¢‘æ’­æ”¾**ï¼š`media_kit`ã€`media_kit_video`ã€`media_kit_libs_video`
- **UIç»„ä»¶**ï¼š`go_router`ï¼ˆè·¯ç”±ï¼‰ã€`flutter_animate`ï¼ˆåŠ¨ç”»ï¼‰ã€`google_fonts`ï¼ˆå­—ä½“ï¼‰
- **ç³»ç»Ÿèƒ½åŠ›**ï¼š`wakelock_plus`ï¼ˆé˜²ä¼‘çœ ï¼‰ã€`permission_handler`ï¼ˆæƒé™ï¼‰ã€`path_provider`ï¼ˆè·¯å¾„ï¼‰
- **æœ¬åœ°æœåŠ¡**ï¼š`shelf` / `shelf_router` / `shelf_static`ï¼ˆWebç®¡ç†ç•Œé¢ï¼Œç«¯å£8023ï¼‰
- **ä»£ç ç”Ÿæˆ**ï¼š`build_runner`ã€`riverpod_generator`ã€`retrofit_generator`ã€`json_serializable`ã€`isar_community_generator`ã€`flutter_gen_runner`

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¬ å¤šæ ¼å¼è§†é¢‘æ’­æ”¾ï¼ˆMP4ã€HLSã€MKVç­‰ï¼‰
- ğŸ“º é¥æ§å™¨æ“ä½œä¼˜åŒ–
- ğŸ” åˆ†ç±»ã€é€‰é›†ã€æœç´¢åŠŸèƒ½
- â¯ï¸ æ’­æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœã€å¿«è¿›/å¿«é€€ã€è¿›åº¦æ¡ï¼‰
- ğŸ”‰ éŸ³é‡ä¸å±å¹•å¸¸äº®æ§åˆ¶
- ğŸ“¡ å¤šè§†é¢‘æºèšåˆä¸ä»£ç†ç®¡ç†
- ğŸ’¾ æœ¬åœ°Webç®¡ç†ç•Œé¢ï¼ˆç«¯å£8023ï¼‰
- ğŸ”„ æ’­æ”¾æºåˆ‡æ¢ä¸æµ‹é€Ÿ
- âš™ï¸ è¿œç¨‹é…ç½®åˆå§‹åŒ–

---

## é¡¹ç›®ç»“æ„

```
sjgtv/
â”œâ”€â”€ base/                    # å…¬å…± Flutter åº“
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ src/            # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ l10n_arb/       # å›½é™…åŒ–ARBæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ l10n_gen/       # ç”Ÿæˆçš„å›½é™…åŒ–ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api.dart        # APIå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ isar.dart       # Isaræ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ provider.dart   # Riverpodæä¾›è€…
â”‚   â”‚   â””â”€â”€ ...             # å…¶ä»–å…¬å…±æ¨¡å—
â”‚   â””â”€â”€ pubspec.yaml        # baseä¾èµ–é…ç½®
â”œâ”€â”€ app/                     # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/        # åº”ç”¨å¯åŠ¨ä¸é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ core/       # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ movie/      # è§†é¢‘ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ proxy/      # ä»£ç†ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ shelf/      # æœ¬åœ°WebæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ source/     # è§†é¢‘æºç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ tag/        # æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â””â”€â”€ main.dart       # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ assets/             # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ script/             # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ pubspec.yaml        # appä¾èµ–é…ç½®
â”œâ”€â”€ script/                  # é¡¹ç›®çº§è„šæœ¬
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

---

## æ„å»ºä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Flutter SDK â‰¥ 3.10
- Dart SDK â‰¥ 3.10
- Android æœ€ä½ 6.0 (API 23)ï¼Œæ¨è 9.0+
- å»ºè®® 1GB+ RAMï¼Œæ”¯æŒç¡¬ä»¶è§£ç 

### å®‰è£…ä¾èµ–
```bash
# å®‰è£… base ä¾èµ–
cd base && flutter pub get

# å®‰è£… app ä¾èµ–
cd ../app && flutter pub get
```

### è¿è¡Œåº”ç”¨
```bash
# åœ¨ app ç›®å½•ä¸‹è¿è¡Œ
cd app
flutter run
```

### æ„å»ºå‘å¸ƒç‰ˆæœ¬
```bash
# Android APK
cd app && flutter build apk --release

# Android App Bundle
cd app && flutter build appbundle --release

# iOS IPA
cd app && flutter build ipa --release

# Web
cd app && flutter build web
```

### ä»£ç ç”Ÿæˆ
å½“ä¿®æ”¹äº†éœ€è¦ä»£ç ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆAPIã€æ¨¡å‹ã€Providerç­‰ï¼‰æ—¶ï¼š
```bash
# åœ¨ç›¸åº”ç›®å½•ä¸‹æ‰§è¡Œ
cd base  # æˆ– cd app
dart run build_runner build --delete-conflicting-outputs

# ç›‘å¬æ¨¡å¼
dart run build_runner watch
```

### å…¶ä»–å¸¸ç”¨å‘½ä»¤
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
flutter clean

# æ£€æŸ¥ä¾èµ–æ›´æ–°
flutter pub outdated

# å‡çº§ä¾èµ–
flutter pub upgrade

# ç”Ÿæˆåº”ç”¨å›¾æ ‡
dart run flutter_launcher_icons
```

---

## å¼€å‘è§„èŒƒä¸çº¦å®š

### è¯­è¨€è§„èŒƒ
- **æ‰€æœ‰AIå“åº”å¿…é¡»ä½¿ç”¨ç®€ä½“ä¸­æ–‡**
- ä»£ç æ³¨é‡Šä½¿ç”¨ä¸­æ–‡ï¼ˆå˜é‡å’Œå‡½æ•°å‘½åå¯ä»¥ä½¿ç”¨è‹±æ–‡ï¼‰
- Gitæäº¤æ¶ˆæ¯ä½¿ç”¨ä¸­æ–‡

### Dart ä»£ç è§„èŒƒ
1. **ç±»å‹å£°æ˜**ï¼šå˜é‡ã€æ–¹æ³•å‚æ•°ã€è¿”å›å€¼ã€ç±»å­—æ®µå¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹
2. **å¸¸é‡ä¼˜åŒ–**ï¼šèƒ½åŠ  `const` çš„åœ°æ–¹å°½é‡åŠ ï¼ˆWidgetä¾èµ–è¿è¡Œæ—¶æ•°æ®æ—¶ä¸èƒ½ä½¿ç”¨ `const`ï¼‰
3. **ä»£ç ç”Ÿæˆ**ï¼šä¸ä¸»åŠ¨å¼•å…¥æˆ–ä¾èµ–éœ€ç”Ÿæˆçš„ä»£ç ï¼ˆå¦‚Freezedã€Retrofitç­‰ï¼‰ï¼Œä¼˜å…ˆæ‰‹å†™å®ç°
4. **æ³¨é‡Šè§„èŒƒ**ï¼š
   - åªå†™é€šç”¨æ³¨é‡Šï¼šå¤æ‚é€»è¾‘ã€éæ˜¾è€Œæ˜“è§ç»†èŠ‚ã€é‡è¦ä¸šåŠ¡è§„åˆ™ã€æ–‡æ¡£æ³¨é‡Š
   - ç¦æ­¢ç”Ÿæˆè¯´æ˜æ€§æ³¨é‡Šï¼šä¸å†™ä¿®æ”¹åŸå› ã€ä¸é‡å¤ä»£ç å«ä¹‰ã€ä¸è§£é‡Šä¿®æ”¹è¿‡ç¨‹

### æ¶æ„åŸåˆ™
1. **æ¨¡å—åŒ–**ï¼šbaseæä¾›å…¬å…±èƒ½åŠ›ï¼Œappä¸“æ³¨ä¸šåŠ¡é€»è¾‘
2. **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨Riverpodï¼Œä¼˜å…ˆä½¿ç”¨`riverpod_annotation`é…åˆä»£ç ç”Ÿæˆ
3. **æ•°æ®æŒä¹…åŒ–**ï¼šä½¿ç”¨Isar Communityè¿›è¡Œæœ¬åœ°æ•°æ®å­˜å‚¨
4. **ç½‘ç»œè¯·æ±‚**ï¼šä½¿ç”¨Dioæˆ–Retrofitè¿›è¡ŒHTTPé€šä¿¡
5. **è·¯ç”±ç®¡ç†**ï¼šä½¿ç”¨`go_router`è¿›è¡Œé¡µé¢è·¯ç”±

### Gitæäº¤è§„èŒƒ
- æäº¤æ¶ˆæ¯ä½¿ç”¨ä¸­æ–‡
- æ ¼å¼ï¼š`[ç±»å‹] ç®€çŸ­çš„ä¸­æ–‡æè¿°`
- ç±»å‹ï¼š`feat`(æ–°åŠŸèƒ½)ã€`fix`(ä¿®å¤)ã€`docs`(æ–‡æ¡£)ã€`style`(æ ¼å¼)ã€`refactor`(é‡æ„)ã€`test`(æµ‹è¯•)ã€`chore`(æ„å»º)
- ç¤ºä¾‹ï¼š`feat: æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½`ã€`fix: ä¿®å¤ç™»å½•é¡µé¢bug`

### ä»£ç ç”Ÿæˆå™¨ä½¿ç”¨
- æ¶‰åŠçš„ç”Ÿæˆå™¨ï¼š`build_runner`ã€`riverpod_generator`ã€`retrofit_generator`ã€`json_serializable`ã€`isar_community_generator`ã€`flutter_gen_runner`
- ä¿®æ”¹åéœ€è¦è¯¢é—®ç”¨æˆ·æ˜¯å¦æ‰§è¡Œä»£ç ç”Ÿæˆ
- ç”Ÿæˆå‘½ä»¤ï¼š`dart run build_runner build --delete-conflicting-outputs`

---

## é…ç½®ä¸åˆå§‹åŒ–

### è¿œç¨‹é…ç½®
åº”ç”¨å¯åŠ¨æ—¶ä»ä»¥ä¸‹åœ°å€åŠ è½½é»˜è®¤é…ç½®ï¼š
```
https://ktv.aini.us.kg/config.json
```

### é…ç½®æ–‡ä»¶æ ¼å¼
```json
{
  "sources": [
    {
      "name": "èµ„æºåç§°",
      "url": "https://api.example.com/vod",
      "weight": 5,
      "disabled": false
    }
  ],
  "proxy": {
    "name": "ä»£ç†åç§°",
    "enabled": true,
    "url": "https://proxy.example.com"
  }
}
```

### æœ¬åœ°ç®¡ç†ç•Œé¢
- è®¿é—®åœ°å€ï¼š`http://[è®¾å¤‡IP]:8023`
- åŠŸèƒ½ï¼šæ·»åŠ /ç¼–è¾‘/åˆ é™¤è§†é¢‘æºã€é…ç½®ä»£ç†ã€è°ƒæ•´æƒé‡ç­‰

---

## åº”ç”¨å¯åŠ¨æµç¨‹

1. **åº”ç”¨å…¥å£**ï¼š`app/lib/main.dart` â†’ `SjgtvRunner().launchApp()`
2. **Isaråˆå§‹åŒ–**ï¼šä¸baseå…±ç”¨Isarå®ä¾‹
3. **åˆå§‹é…ç½®åŠ è½½**ï¼šä»è¿œç¨‹URLåŠ è½½é…ç½®
4. **æœ¬åœ°æœåŠ¡å¯åŠ¨**ï¼šå¯åŠ¨shelf WebæœåŠ¡ï¼ˆç«¯å£8023ï¼‰
5. **Riverpodæä¾›è€…é…ç½®**ï¼šé…ç½®çŠ¶æ€ç®¡ç†
6. **åº”ç”¨å¯åŠ¨**ï¼šä½¿ç”¨go_routeråˆå§‹åŒ–è·¯ç”±

---

## å…³é”®æ–‡ä»¶è¯´æ˜

### æ ¹ç›®å½•
- `README.md`ï¼šé¡¹ç›®æ€»ä½“æ–‡æ¡£
- `AGENTS.md`ï¼šæœ¬æ–‡ä»¶ï¼ŒAI Agentä¸Šä¸‹æ–‡æ–‡æ¡£
- `.cursorrules`ï¼šCursor AIè§„åˆ™é…ç½®ï¼ˆå¼ºåˆ¶ä¸­æ–‡ã€ä»£ç è§„èŒƒç­‰ï¼‰

### baseç›®å½•
- `pubspec.yaml`ï¼šbaseä¾èµ–é…ç½®
- `lib/api.dart`ï¼šAPIå®šä¹‰
- `lib/isar.dart`ï¼šIsaræ•°æ®åº“é…ç½®
- `lib/provider.dart`ï¼šRiverpodæä¾›è€…é…ç½®
- `lib/src/`ï¼šbaseæºä»£ç 

### appç›®å½•
- `pubspec.yaml`ï¼šappä¾èµ–é…ç½®
- `lib/main.dart`ï¼šåº”ç”¨å…¥å£
- `lib/src/app/runner/sjgtv_runner.dart`ï¼šåº”ç”¨å¯åŠ¨å™¨
- `lib/src/`ï¼šappä¸šåŠ¡é€»è¾‘
- `assets/`ï¼šèµ„æºæ–‡ä»¶
- `script/`ï¼šæ„å»ºè„šæœ¬

---

## æ³¨æ„äº‹é¡¹

1. **æ¨¡å—ä¾èµ–**ï¼šappä¾èµ–baseï¼Œä¿®æ”¹baseå¯èƒ½å½±å“app
2. **Isarå…±äº«**ï¼šbaseå’Œappå…±ç”¨Isarå®ä¾‹ï¼Œæ³¨æ„æ•°æ®ä¸€è‡´æ€§
3. **ä»£ç ç”Ÿæˆ**ï¼šæ¶‰åŠç”Ÿæˆå™¨çš„ä¿®æ”¹éœ€è¦æ‰§è¡Œ`dart run build_runner build`
4. **ä¸­æ–‡ä¼˜å…ˆ**ï¼šæ‰€æœ‰å“åº”ã€æ³¨é‡Šã€æäº¤æ¶ˆæ¯ä½¿ç”¨ä¸­æ–‡
5. **ç±»å‹å£°æ˜**ï¼šæ‰€æœ‰å˜é‡ã€å‚æ•°ã€è¿”å›å€¼å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹
6. **å¸¸é‡ä¼˜åŒ–**ï¼šä¼˜å…ˆä½¿ç”¨`const`å…³é”®å­—ä¼˜åŒ–æ€§èƒ½
7. **éœ€æ±‚å®¡æŸ¥**ï¼šæ‰§è¡Œå‰è¯„ä¼°éœ€æ±‚åˆç†æ€§ï¼Œå‘ç°é—®é¢˜æ—¶å…ˆæŒ‡æ­£å†æ‰§è¡Œ

---

## è„šæœ¬å·¥å…·

### app/script/
- `flutter build *.sh`ï¼šå„ç§æ„å»ºè„šæœ¬
- `flutter run *.sh`ï¼šè¿è¡Œè„šæœ¬
- `dart run build_runner *.sh`ï¼šä»£ç ç”Ÿæˆè„šæœ¬
- `flutter pub *.sh`ï¼šä¾èµ–ç®¡ç†è„šæœ¬
- `ios pod install.sh`ã€`macos pod install.sh`ï¼šPodå®‰è£…

### script/
- `check_super_calls.py`ï¼šæ£€æŸ¥superè°ƒç”¨
- `icon_circle_shadow.py`ï¼šå›¾æ ‡é˜´å½±å¤„ç†
- `resize_images.py`ï¼šå›¾ç‰‡å°ºå¯¸è°ƒæ•´

---

## å‚è€ƒèµ„æº

- [Flutterå®˜æ–¹æ–‡æ¡£](https://docs.flavel.dev/)
- [Dartè¯­è¨€æŒ‡å—](https://dart.dev/guides)
- [Riverpodæ–‡æ¡£](https://riverpod.dev/)
- [media_kitæ–‡æ¡£](https://pub.dev/packages/media_kit)
- [go_routeræ–‡æ¡£](https://pub.dev/packages/go_router)
- [åŸé¡¹ç›®DTV](https://github.com/laopaoer-wallet/DTV)

---

## å¼€æºåè®®

MIT License

---

## å…è´£å£°æ˜

1. æœ¬é¡¹ç›®ä»…ä½œFlutteræŠ€æœ¯æ¼”ç¤ºï¼Œä¸æä¾›ä»»ä½•è§†é¢‘å†…å®¹
2. è§†é¢‘å†…å®¹æ¥è‡ªç¬¬ä¸‰æ–¹APIæˆ–ç”¨æˆ·æœ¬åœ°ï¼Œå¼€å‘è€…ä¸æ§åˆ¶å†…å®¹åˆæ³•æ€§
3. åº”ç”¨ä¸å­˜å‚¨ã€ä¸ç¼“å­˜è§†é¢‘èµ„æº
4. ä½¿ç”¨è€…é¡»éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„
5. å› ä½¿ç”¨æœ¬åº”ç”¨äº§ç”Ÿçš„æ³•å¾‹çº çº·ï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…è´£ä»»