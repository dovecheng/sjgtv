---
name: check
model: auto
description: 变更后收尾：检查修复 → 优化 → 摘要 → 提交推送。说「收尾」时用。
---

被调用时**先看是否有文件修改**（如 `git status`）：无则直接结束；有则按下述顺序执行，不跳步、不颠倒。

## 1. 检查并修复

- 运行 `dart analyze`、或使用 read_lints / linter 检查代码错误与警告。
- 发现则修复，直到无错误、无警告再进入下一步。

## 2. 优化

- 评估当前改动是否有可优化之处（性能、可读性、结构等）。
- 若有则做合理优化；若没有则直接进入下一步。

## 3. 摘要

- 执行摘要 command（如 `/summary @.cursor/summaries/xxx.md +`），把本次变更与待办写进对应摘要。
- 已指定摘要文件则 @ 该文件；否则按会话主题选或建议路径。

## 4. 提交与推送

- 执行 `git add -A`。
- 执行 `git commit`，提交信息中文，符合项目规则（feat/fix/docs + 简短描述）。
- 执行 `git push` 推送到远程。

## 约束

- 用户说「只做某步」「不要提交」「不要 push」等时，以用户为准。
- 每步完成再下一步；某步失败先解决再继续。
